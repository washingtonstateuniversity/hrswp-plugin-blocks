(()=>{class t{constructor(t,e){this._parent=t,this._ref=e,this._panels=this._parent.querySelectorAll(".wp-block-hrswp-accordion-section"),this._headings=this._parent.querySelectorAll(".hrswp-accordion-heading"),this.expand=this.expand.bind(this),this.expandAll=this.expandAll.bind(this),this.collapse=this.collapse.bind(this),this.collapseAll=this.collapseAll.bind(this),this.toggle=this.toggle.bind(this),this._setupPanels(),this._setupControls(),this._setupHeadingButtons(),this._expandAllTrigger=this._parent.querySelector("#open-all-panels"),this._collapseAllTrigger=this._parent.querySelector("#close-all-panels"),this._triggers=this._parent.querySelectorAll(".accordion-panel-trigger"),this._addEventListeners(),this.activate()}activate(){this._parent.classList.add("accordion-active")}expand(t,e){this._setAriaExpanded(t,"true"),this._setAriaHidden(e,"false")}expandAll(){this._panels.forEach((t=>{this._setAriaHidden(t,"false")})),this._triggers.forEach((t=>{this._setAriaExpanded(t,"true")}))}collapse(t,e){this._setAriaExpanded(t,"false"),this._setAriaHidden(e,"true")}collapseAll(){this._panels.forEach((t=>{this._setAriaHidden(t,"true")})),this._triggers.forEach((t=>{this._setAriaExpanded(t,"false")}))}toggle(t){const e=t.target,i=document.getElementById(e.getAttribute("aria-controls"));t.preventDefault(),this._isExpanded(e)?this.collapse(e,i):this.expand(e,i)}_setupPanels(){let t=0;this._headings.forEach((e=>{const i=e.parentNode;i.setAttribute("id",`accordion-${this._ref}-panel-${t}`),i.before(e),t++})),this._panels.forEach((t=>{t.setAttribute("aria-hidden",!0),t.setAttribute("aria-labelledby",`${t.id}-trigger`)}))}_setupControls(){const t=document.createElement("div"),e=document.createElement("button"),i=document.createElement("button");t.classList.add("controls"),this._parent.insertBefore(t,this._parent.firstChild),t.appendChild(e),t.appendChild(i),e.setAttribute("type","button"),e.setAttribute("id","open-all-panels"),e.appendChild(document.createTextNode("Open All")),i.setAttribute("type","button"),i.setAttribute("id","close-all-panels"),i.appendChild(document.createTextNode("Close All"))}_setupHeadingButtons(){this._headings.forEach((t=>{const e=t.nextElementSibling.id,i=document.createElement("button"),s=t.textContent;t.innerHTML="",i.setAttribute("type","button"),i.setAttribute("aria-controls",e),i.setAttribute("id",`${e}-trigger`),i.classList.add("accordion-panel-trigger"),t.appendChild(i),i.appendChild(document.createTextNode(s))}))}_addEventListeners(){this._triggers.forEach((t=>{t.addEventListener("click",this.toggle)})),this._expandAllTrigger.addEventListener("click",this.expandAll),this._collapseAllTrigger.addEventListener("click",this.collapseAll)}_isExpanded(t){return"true"===t.getAttribute("aria-expanded")}_setAriaHidden(t,e){return t.setAttribute("aria-hidden",e)}_setAriaExpanded(t,e){return t.setAttribute("aria-expanded",e)}}!function(){const e=document.querySelectorAll(".wp-block-hrswp-accordions");let i=0;e.forEach((e=>{new t(e,i),i++}))}()})();